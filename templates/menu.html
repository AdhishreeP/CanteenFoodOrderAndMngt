<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Menu items</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
</head>
<body>
    <h1 class="text-center">Canteen Menu</h1>
    <hr> 
    <div class="mt-5">
        <div class="">
                <div class="row">
                {% set count = namespace(value=0) %}
                {% for d in data %}
                {% set count.value = count.value + 1 %}
                <div class="col-4 d-flex align-items-center justify-content-center">
                    <form action="/menu-items" method="POST" style="text-align: center;">
                      <div class="rounded-3 shadow-sm rounded border border-2 px-5 py-3 mb-5">
                    <div class="feature-icon d-inline-flex justify-content-center bg-gradient">
                        <img src="{{ d[1] }}" alt="" width="200" height="200">
                        <svg class="bi" width="1em" height="1em"><use xlink:href="#toggles2"></use></svg>
                    </div>
                    <h3 class="fs-2">{{ d[0]|capitalize }}</h3>
                    <p>
                        Price : {{ d[2] }}<br>
                        Quantity : <input type="number" min="1" max="50" class="mb-2" name="quantity"><br>
                        <hr>
                          <input type="hidden" name="item_id" value="{{d[3]}}">
                          <input type="hidden" name="item_counter" value="{{count['value']}}">
                        {% if c == count['value'] %}
                        <p class="text-center text-danger">{{message}}</p>
                        {% endif %}
                  
                        {% if name == d[0] %}                       
                        {% set val = "Added" %}  
                        {% set path = "https://cdn-icons-png.flaticon.com/128/4436/4436481.png" %}
                        <button type="submit" class="border border-1 p-2 text-primary fs-5" disabled>{{val}}
                          <img src="{{path}}" alt="add to cart" width="25">
                        </button>
                        {% else %}
                        {% set val = "Add to Cart" %}
                        {% set path = "https://cdn-icons-png.flaticon.com/512/4903/4903884.png" %}
                        <button type="submit" class="border border-1 p-2 text-primary fs-5" >{{val}}
                          <img src="{{path}}" alt="add to cart" width="25">
                        </button>
                        {% endif %}
                    </p>
                      <svg class="bi" width="1em" height="1em"><use xlink:href="#chevron-right"></use></svg>
                    </div>
                    </form>
                    </div>
                {% endfor %}
                </div>
        </div>
    </div>
  </body>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
</html>